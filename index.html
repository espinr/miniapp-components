<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>MiniApp Components</title>
  <script async class="remove" src="https://www.w3.org/Tools/respec/respec-w3c"></script>
  <script class="remove">
    var respecConfig = {
      specStatus: "CG-DRAFT",
      copyrightStart: "2022",
      edDraftURI: "https://w3c.github.io/miniapp-components",
      editors: [
        {
          name: "Martin Alvarez-Espinar",
          companyURL: "https://www.huawei.com",
          company: "Huawei",
          w3cid: 125049,
        },
        {
          name: "Zitao Wang",
          companyURL: "https://www.huawei.com",
          company: "Huawei",
          w3cid: 124483,
        },
      ],
      group: "cg/miniapps",
      github: {
        repoURL: "https://github.com/w3c/miniapp-components",
        branch: "main",
      },
      localBiblio: {
      },
      a11y: true,
    };
  </script>
</head>

<body data-cite="MINIAPP-PACKAGING">

  <section id="abstract">
    <p>MiniApp Components are the building blocks to creating MiniApp Pages. These components encapsulate functionality, data,
      and styles, enabling developers to create custom and reusable items that can be combined to develop MiniApps. This
      specification aims to specify a set of common practices to define [=MiniApp Components=] that allow developers to build
      similar user interfaces across MiniApp platforms efficiently and provide a consistent user experience.</p>
  </section>

  <section id="sotd">
  </section>

  <section id="sec-introduction">
    <h2>Introduction</h2>

    <p>[=MiniApp Components=] are the building blocks to creating
      <a href="https://www.w3.org/TR/miniapp-packaging/#dfn-page"
        data-link-type="dfn">MiniApp Pages</a>. These components encapsulate functionality, data, and styles, enabling developers to create custom
        and reusable items that can be combined to develop MiniApps. MiniApps include essential elements like page containers,
        textual and multimedia content, and other interactive features like forms.</p>

    <p>To align MiniApps and Web applications, MiniApps may be defined using Web resources (i.e., HTML, CSS,
      and scripts) as described in [[MINIAPP-PACKAGING]]. Despite this, traditionally, MiniApp implementations offer specific
      non-standard features and mechanisms facilitating the development and implementation of the MiniApp Components.</p>

    <p>Although MiniApp Components share the same concept as Web Components, their capabilities and development features differ.
      The main differences are motivated by the architecture of the existing implementations along the MiniApp ecosystem
      following the MVVM pattern, based on components developed through domain-specific markup languages and without access
      to the standard DOM.</p>

    <p>To avoid overlap with Web Components, also supported by MiniApp user agents, this specification aims to be an informative
      reference and is not intended to be a formal standard. Thus, it aims to specify a set of common practices to define
      [=MiniApp Components=] that allow developers to build similar user interfaces across MiniApp platforms efficiently
      and provide a consistent user experience.</p>

    <section id="conformance">
    </section>
  </section>

  <section id="sec-basics">
    <h2>Component Basics</h2>
    <p></p>

    <section id="sec-pages-components">
      <h3>MiniApp Pages and Components</h3>
      <p>
        A <dfn>MiniApp Component</dfn> is a custom MiniApp element with encapsulated functionality, data and styles that
        can be reused in <a href="https://www.w3.org/TR/miniapp-packaging/#dfn-page" data-link-type="dfn">MiniApp Pages</a>.
      </p>
      <div class="ednote">
        Structure, differences with Web Pages and Web Components.
      </div>
    </section>

    <section id="sec-interface">
      <h3>MiniApp Interface</h3>
      <p>
      </p>
      <div class="ednote">
        Formal definition of the interface?
      </div>
    </section>
  </section>

  <section id="sec-templating">
    <h2>Templating</h2>
    <p></p>
    <section id="sec-data-interpolation">
      <h3>Content Interpolation</h3>
      <p></p>
      <div class="ednote">
        Data binding.
      </div>
    </section>
  </section>

  <section id="sec-declaration">
    <h2>Component Declaration</h2>
    <p></p>
    <div class="ednote">
      Component interface (properties)
    </div>
  </section>

  <section id="sec-reuse">
    <h2>Component Reuse</h2>
    <p></p>
    <div class="ednote">
      How to instantiate a component. Passing arguments, attributes. Access to component nodes.
    </div>
  </section>

  <section id="sec-properties">
    <h2>Component Properties and Methods</h2>
    <p></p>
    <div class="ednote">
    </div>
  </section>

  <section id="sec-events">
    <h2>Component Events</h2>
    <section id="sec-events-binding">
      <h3>Event Binding</h3>
      <p></p>
      <div class="ednote">
      </div>
    </section>
    <section id="sec-events-listeners">
      <h3>Event Listeners</h3>
      <p></p>
      <div class="ednote">
        How
      </div>
    </section>
    <section id="sec-events-types">
      <h3>Types of Events</h3>
      <p></p>
      <div class="ednote">
        The common events for MiniApps.
      </div>
    </section>
  </section>

  <section id="sec-scripting">
    <h2>Scripting Resources</h2>
    <p></p>
    <div class="ednote">
      Restrictions in the scripting resources.
    </div>
  </section>

  <section id="sec-stylesheets">
    <h2>Stylesheets</h2>
    <p></p>
    <div class="ednote">
      CSS profile supported.
    </div>
  </section>

  <section id="sec-lifecycle">
    <h2>Component Lifecycle</h2>
    <p>
      The lifecycle of a component refers to the process from its creation to its destruction. Every MiniApp component implements a collection of lifecycle callbacks triggered at the different stages of the component lifespan. As described in [[MINIAPP-LIFECYCLE]], MiniApp pages and components are rendered on the [=Document/View layer=], while the events involving the lifecycle management are processed on the [=Document/Logic layer=] of the user agent. 
    </p>
    
    <p data-cite="ECMASCRIPT">
      The component lifecycle callbacks are `created`, `attached`, `ready`, `detached`, `show`, and `hide`. The corresponding values are either a Web IDL {{Function}} callback function type value or `null`. By default, the value of each entry is `null`. 
    </p>
    <dl>
      <dt>`created`</dt>
      <dd>Callback function that indicates when a component is created in the system. This callback is triggered when a custom component is first created but not necessarily attached to the page. This callback, triggered only once, is usually used to initialize the component's properties.</dd>
      <dt>`attached`</dt>
      <dd>This callback is triggered when the component, already created, is attached to the document tree of a page. It is usually used for initializing the data for display, such as loading images and starting animations.</dd>
      <dt>`ready`</dt>
      <dd>Once a custom component is attached to the page document tree, the user agent renders the component in the [=Document/View layer=], performing the calculations and adjustment of the size and the position of the component layout and its contents. This callback is triggered after the layout calculation is complete and ready to be rendered.</dd>
      <dt>`detached`</dt>
      <dd>This callback is triggered when the node of a custom component is removed from the page document tree. It is usually used to stop animations or halt asynchronous executions.</dd>
      <dt>`show`</dt>
      <dd>This callback is triggered once the user agent renders the component to the user.</dd>
      <dt>`hide`</dt>
      <dd>This callback is triggered when the component is hidden from the user.</dd>
    </dl>  
    <div class="note" title="Differences between MiniApp Components and Web Components">
      <p>
        There are some differences between HTML Custom Elements and MiniApp component lifecycles:
      </p>
      <ul>
        <li>The `attached` and `detached` callbacks correspond to the `connectedCallback` and `disconnectedCallback` functions in standard Custom Elements, respectively, with the same functionality.</li>

        <li>MiniApp user agents do not support the migration of components in the document scope. Therefore, there is no `adopted` state in MiniApp components.</li>
        <li>MiniApp components have `created` and `ready` states with no standard equivalence. These callbacks are defined to notify changes in the creation status between the two main layers, the [=Document/Logic layer=] and the [=Document/View layer=]), running in separate threads.</li>
        <li>MiniApps do not support HTML Custom Elements' `attributeChangedCallback`. This callback is triggered when any attribute of a custom element changes, including adding, deleting, and updating. As shown in the <a href="#sec-templating">templating section</a>, the MiniApp framework only supports unidirectional data binding and cannot directly interact with the DOM. Therefore, any change in the DOM attribute cannot trigger any similar event.</li>
      </ul> 
    </div>
    <aside class="example" title="Lifecycle events of a MiniApp component">
      <p>
        Once the user agent starts the execution and rendering of a component in a page:
      </p>
      <ol>
        <li>The component is `created` in the system. The callback initializes the properties and data under the scope of the component. The initialization is performed from the scripting file (with `.js` extension) of the component.</li>
        <li>The node of the component is inserted into the page document tree, triggering the `attached` callback.</li>
        <li>The user agent analyzes the layout, calculating and adjusting the size and position of its elements and contents.</li>
        <li>Once the user agent completes the component's rendering, the `ready` event is triggered.</li>
      </ol>
    </aside>
  </section>

  <section id="sec-elements">
    <h2>MiniApp Elements</h2>
    <p></p>
    <div class="ednote">
      Essential MiniApp elements. List, global attributes, events...
    </div>
  </section>  

  <section id="sec-accessibility" class="informative">
    <h2>Accessibility Considerations</h2>
    <p></p>
  </section>

  <section id="sec-security" data-cite="PERMISSIONS">
    <h2>Security Considerations</h2>
    <p></p>
  </section>

  <section id="sec-privacy">
    <h2>Privacy Considerations</h2>
    <p></p>
  </section>

  <section class="appendix" id="sec-acknowledgments">
    <h2>Acknowledgments</h2>
    <div class="ednote">List all the contributors and W3C Team contacts</div>
  </section>

</body>

</html>