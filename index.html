<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>MiniApp Components</title>
  <script async class="remove" src="https://www.w3.org/Tools/respec/respec-w3c"></script>
  <script class="remove">
    var respecConfig = {
      specStatus: "CG-DRAFT",
      copyrightStart: "2022",
      edDraftURI: "https://w3c.github.io/miniapp-components",
      editors: [
        {
          name: "Martin Alvarez-Espinar",
          companyURL: "https://www.huawei.com",
          company: "Huawei",
          w3cid: 125049,
        },
        {
          name: "Zitao Wang",
          companyURL: "https://www.huawei.com",
          company: "Huawei",
          w3cid: 124483,
        },
      ],
      group: "cg/miniapps",
      github: {
        repoURL: "https://github.com/w3c/miniapp-components",
        branch: "main",
      },
      localBiblio: {
      },
      a11y: true,
    };
  </script>
</head>

<body data-cite="MINIAPP-PACKAGING">

  <section id="abstract">
    <p>MiniApp Components are the building blocks to creating MiniApp Pages. These components encapsulate functionality, data,
      and styles, enabling developers to create custom and reusable items that can be combined to develop MiniApps. This
      specification aims to specify a set of common practices to define [=MiniApp Components=] that allow developers to build
      similar user interfaces across MiniApp platforms efficiently and provide a consistent user experience.</p>
  </section>

  <section id="sotd">
  </section>

  <section id="sec-introduction">
    <h2>Introduction</h2>

    <p>[=MiniApp Components=] are the building blocks to creating
      <a href="https://www.w3.org/TR/miniapp-packaging/#dfn-page"
        data-link-type="dfn">MiniApp Pages</a>. These components encapsulate functionality, data, and styles, enabling developers to create custom
        and reusable items that can be combined to develop MiniApps. MiniApps include essential elements like page containers,
        textual and multimedia content, and other interactive features like forms.</p>

    <p>To align MiniApps and Web applications, MiniApps may be defined using Web resources (i.e., HTML, CSS,
      and scripts) as described in [[MINIAPP-PACKAGING]]. Despite this, traditionally, MiniApp implementations offer specific
      non-standard features and mechanisms facilitating the development and implementation of the MiniApp Components.</p>

    <p>Although MiniApp Components share the same concept as Web Components, their capabilities and development features differ.
      The main differences are motivated by the architecture of the existing implementations along the MiniApp ecosystem
      following the MVVM pattern, based on components developed through domain-specific markup languages and without access
      to the standard DOM.</p>

    <p>To avoid overlap with Web Components, also supported by MiniApp user agents, this specification aims to be an informative
      reference and is not intended to be a formal standard. Thus, it aims to specify a set of common practices to define
      [=MiniApp Components=] that allow developers to build similar user interfaces across MiniApp platforms efficiently
      and provide a consistent user experience.</p>

    <section id="conformance">
    </section>
  </section>

  <section id="sec-basics">
    <h2>Component Basics</h2>
    <p></p>

    <section id="sec-pages-components">
      <h3>MiniApp Pages and Components</h3>
      <p>
        A <dfn>MiniApp Component</dfn> is a custom MiniApp element with encapsulated functionality, data and styles that
        can be reused in <a href="https://www.w3.org/TR/miniapp-packaging/#dfn-page" data-link-type="dfn">MiniApp Pages</a>.
      </p>
      <div class="ednote">
        Structure, differences with Web Pages and Web Components.
      </div>
    </section>

    <section id="sec-interface">
      <h3>MiniApp Interface</h3>
      <p>
      </p>
      <div class="ednote">
        Formal definition of the interface?
      </div>
    </section>
  </section>

  <section id="sec-templating">
    <h2>Templating</h2>
    <p></p>
    <section id="sec-data-interpolation">
      <h3>Content Interpolation</h3>
      <p></p>
      <div class="ednote">
        Data binding.
      </div>
    </section>
  </section>

  <section id="sec-declaration">
    <h2>Component Declaration</h2>
    <p></p>
    <div class="ednote">
      Component interface (properties)
    </div>
  </section>

  <section id="sec-reuse">
    <h2>Component Reuse</h2>
    <p></p>
    <div class="ednote">
      How to instantiate a component. Passing arguments, attributes. Access to component nodes.
    </div>
  </section>

  <section id="sec-properties">
    <h2>Component Properties and Methods</h2>
    <p></p>
    <div class="ednote">
    </div>
  </section>

  <section id="sec-events">
    <h2>Component Events</h2>
    <section id="sec-events-binding">
      <h3>Event Binding</h3>
      <p></p>
      <div class="ednote">
      </div>
    </section>
    <section id="sec-events-listeners">
      <h3>Event Listeners</h3>
      <p></p>
      <div class="ednote">
        How
      </div>
    </section>
    <section id="sec-events-types">
      <h3>Types of Events</h3>
      <p></p>
      <div class="ednote">
        The common events for MiniApps.
      </div>
    </section>
  </section>

  <section id="sec-scripting">
    <h2>Scripting Resources</h2>
    <p>
      MiniApp user agents support scripting resources to define the business logic and operation of the components. Although the aim of this specification is not to recommend a specific scripting language, the document considers ECMAScript (broadly known as JavaScript) [[ECMASCRIPT]] as the scripting language by default.

    </p>
    <p>
      As indicated in [[MINIAPP-PACKAGING]], each MiniApp component has a scripting file (with the `.js` extension). Since each component has its own scope, the functions and variables defined in the scripting file have global scope across the entire component, but they are isolated from the rest of the MiniApp components.     
    </p>
    <p>
      Scripts in components support module management. Modules have an independent scope, so the elements defined in a module are private by default and invisible to other modules. The exposition of the concrete module variables or functions MUST be explicitly made through the export declarations. Only local modules (i.e., hosted in the same package) MAY be imported.
    </p>
    <p data-cite="HTML">
      HTML resources (with the .html extension) MAY import local scripts, such as auxiliary libraries shared by the MiniApp components. These script documents SHOULD be hosted in the `/common` directory as defined in [[MINIAPP-PACKAGING]], so they will be available to any component in the package. As in the case of scripting modules, only local scripts (i.e., hosted in the same package) will be accessible to the components. Developers MAY include any scripting resource hosted in the same package from the HTML, using the `script` element, equivalent to [^script^] in HTML, with the [^script/src^] attribute to specify the URI of the document to import. The functions and variables of the imported script will have a limited scope across the entire component.
    </p>
    <pre class="example" title="Scripting modules import"><code>//Static import
import utils from '../Common/utils.js'

// Dynamically
const utils = require('/Common/utils.js')
    </code></pre>

    <pre class="example" title="Loading scripts from HTML"><code>&lt;script src="../Common/utils.js"&gt;&lt;script&gt;</code></pre>
    
    <section id="sec-scripting-constraints">
      <h3>Conformance of scripting resources</h3>

      <p>The script language in MiniApp packages is not restricted to ECMAScript (JavaScript). Still, this document uses it as a reference to illustrate the features that MUST be implemented and supported by MiniApps user agents.</p>

      <ul class="conformance" data-cite="HTML">
        <li>User agents MUST NOT allow the <a href="https://tc39.es/ecma262/#sec-eval-x">eval()</a> function in scripts to prevent security risks.</li>
        <li>Likewise, the {{WindowOrWorkerGlobalScope/setTimeout()}} and {{WindowOrWorkerGlobalScope/setInterval()}} functions MUST only support the first parameter as a callback function, preventing the execution of code dynamically.</li>
        <li>User agents MUST NOT allow the creation of functions dynamically.</li>
        <li>Each script module has its own independent scope.</li>
        <li>Only modules and scripts included within the same package could be imported. No external scripts can be loaded.</li>
      </ul>
    </section>
  </section>

  <section id="sec-stylesheets">
    <h2>Stylesheets</h2>
    <p></p>
    <div class="ednote">
      CSS profile supported.
    </div>
  </section>

  <section id="sec-lifecycle">
    <h2>Component Lifecycle</h2>
    <p></p>
    <div class="ednote">
      Explanation and links to MINIAPP-LIFECYCLE.
    </div>
  </section>

  <section id="sec-elements">
    <h2>MiniApp Elements</h2>
    <p></p>
    <div class="ednote">
      Essential MiniApp elements. List, global attributes, events...
    </div>
  </section>  

  <section id="sec-accessibility" class="informative">
    <h2>Accessibility Considerations</h2>
    <p></p>
  </section>

  <section id="sec-security" data-cite="PERMISSIONS">
    <h2>Security Considerations</h2>
    <p></p>
  </section>

  <section id="sec-privacy">
    <h2>Privacy Considerations</h2>
    <p></p>
  </section>

  <section class="appendix" id="sec-acknowledgments">
    <h2>Acknowledgments</h2>
    <div class="ednote">List all the contributors and W3C Team contacts</div>
  </section>

</body>

</html>