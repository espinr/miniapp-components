<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>MiniApp Components</title>
  <script async class="remove" src="https://www.w3.org/Tools/respec/respec-w3c"></script>
  <script class="remove">
    var respecConfig = {
      specStatus: "CG-DRAFT",
      copyrightStart: "2022",
      edDraftURI: "https://w3c.github.io/miniapp-components",
      editors: [
        {
          name: "Martin Alvarez-Espinar",
          companyURL: "https://www.huawei.com",
          company: "Huawei",
          w3cid: 125049,
        },
        {
          name: "Zitao Wang",
          companyURL: "https://www.huawei.com",
          company: "Huawei",
          w3cid: 124483,
        },
      ],
      group: "cg/miniapps",
      github: {
        repoURL: "https://github.com/w3c/miniapp-components",
        branch: "main",
      },
      localBiblio: {
      },
      a11y: true,
    };
  </script>
</head>

<body data-cite="MINIAPP-PACKAGING">

  <section id="abstract">
    <p>MiniApp Components are the building blocks to creating MiniApp Pages. These components encapsulate functionality, data,
      and styles, enabling developers to create custom and reusable items that can be combined to develop MiniApps. This
      specification aims to specify a set of common practices to define [=MiniApp Components=] that allow developers to build
      similar user interfaces across MiniApp platforms efficiently and provide a consistent user experience.</p>
  </section>

  <section id="sotd">
  </section>

  <section id="sec-introduction">
    <h2>Introduction</h2>

    <p>[=MiniApp Components=] are the building blocks to creating
      <a href="https://www.w3.org/TR/miniapp-packaging/#dfn-page"
        data-link-type="dfn">MiniApp Pages</a>. These components encapsulate functionality, data, and styles, enabling developers to create custom
        and reusable items that can be combined to develop MiniApps. MiniApps include essential elements like page containers,
        textual and multimedia content, and other interactive features like forms.</p>

    <p>To align MiniApps and Web applications, MiniApps may be defined using Web resources (i.e., HTML, CSS,
      and scripts) as described in [[MINIAPP-PACKAGING]]. Despite this, traditionally, MiniApp implementations offer specific
      non-standard features and mechanisms facilitating the development and implementation of the MiniApp Components.</p>

    <p>Although MiniApp Components share the same concept as Web Components, their capabilities and development features differ.
      The main differences are motivated by the architecture of the existing implementations along the MiniApp ecosystem
      following the MVVM pattern, based on components developed through domain-specific markup languages and without access
      to the standard DOM.</p>

    <p>To avoid overlap with Web Components, also supported by MiniApp user agents, this specification aims to be an informative
      reference and is not intended to be a formal standard. Thus, it aims to specify a set of common practices to define
      [=MiniApp Components=] that allow developers to build similar user interfaces across MiniApp platforms efficiently
      and provide a consistent user experience.</p>

    <section id="conformance">
    </section>
  </section>

  <section id="sec-basics">
    <h2>Component Basics</h2>
    <p></p>

    <section id="sec-pages-components">
      <h3>MiniApp Pages and Components</h3>
      <p>
        A <dfn>MiniApp Component</dfn> is a custom MiniApp element with encapsulated functionality, data and styles that
        can be reused in <a href="https://www.w3.org/TR/miniapp-packaging/#dfn-page" data-link-type="dfn">MiniApp Pages</a>.
      </p>
      <div class="ednote">
        Structure, differences with Web Pages and Web Components.
      </div>
    </section>

    <section id="sec-interface">
      <h3>MiniApp Interface</h3>
      <p>
      </p>
      <div class="ednote">
        Formal definition of the interface?
      </div>
    </section>
  </section>

  <section id="sec-templating">
    <h2>Templating</h2>
    <p></p>
    <section id="sec-data-interpolation">
      <h3>Content Interpolation</h3>
      <p></p>
      <div class="ednote">
        Data binding.
      </div>
    </section>
  </section>

  <section id="sec-declaration" data-cite="HTML">
    <h2>Component Declaration</h2>
    <p>
      MiniApp user agents provide a series of essential built-in components (also called native elements or native components) equivalent to the standard [=HTML Elements=]. These built-in elements allow developers to create customized components that can be instantiated and re-used by other MiniApp components. 
    </p>
    <p>
      Similarly to the standard [=HTML Elements=], developers may use the MiniApp built-in elements to create and customize components. A user-defined component requires three main resources [[MINIAPP-PACKAGING]]:
    </p>
    <ul>
       <li>An HTML resource (e.g., `my-component.html`) to describe the component structure and static content.</li>
       <li>A style sheet (e.g., `my-component.css`) to define the styles of the component (it can be blank).</li>
       <li>A scripting resource (e.g., `my-component.js`) that describes the component's business logic and behavior.</li>
    </ul>
    <p>
      Developers use these HTML resources to define the structure and static content of the component, using the built-in elements and other custom components existing in the package. 
    </p>
    <p>
      A MiniApp component encapsulates its logic and stylesheet. So, the default style sheet and scripts only affect the elements and components defined in the HTML resource. Still developers may use other scripts and style sheets upon explicit declaration. 
    </p>
    <p data-cite="MINIAPP-LIFECYCLE">
      MiniApp user agents specify a mechanism to send data from the component's scripting resource (e.g., `my-component.js`) run in the [=Document/Logic layer=] to the components and elements in the [=Document/View layer=] during runtime execution. User agents interpret the scripting resources as ECMAScript Modules (ESM) that use the `export` declaration in the source file. This scripting resource associated with the main HTML resource is expected to have an anonymous `export default` declaration that contains the component <a href="https://262.ecma-international.org/13.0/#sec-object-initializer">object initializer</a>, which includes callback functions used in events and data properties used in events accessible from the [=Document/View layer=]. They may also have other auxiliary variables, constants, and methods needed for the component's logic.   
    </p>
    <pre class="example" title="Component object initializer"><code>// my-component.js

export default {
  // data attributes 
  // properties
  // event listeners
  // methods 
}
    </code></pre>

    <section id="sec-properties">
      <h3>Component Data, Properties and Methods</h3>
      <p data-cite="MINIAPP-LIFECYCLE">
        The scripting resources (e.g., `my-component.js`) use the `export` keyword to expose an object with the component's data, properties, and methods, making them available to the [=Document/View layer=].     
      </p>
      <p>
        Components may have <strong>data attributes</strong>. These attributes are variables that store information specific to that component and usually hold component states that can influence the logic and UI of the application. These attributes are generally defined directly as part of the component's definition.
      </p>
      <pre class="example" title="Component data attribute declaration"><code>// my-component.js

export default {
  color: 'Red',
  title: 'My component'
}
      </code></pre>      
      <p>
        A <strong>property</strong> is an attribute that can be assigned to the component when it is instantiated, allowing for customization and dynamic behavior. Properties can be considered variables initialized when passed down to the component and can hold a value and be updated as needed. Properties are usually defined by the key `props`, whose value is an object of key-value properties. The key in the object determines the property's name and its value is an object that defines the <a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">data type</a> (`type` member) and value (`value` member).  
      </p>
      <pre class="example" title="Component property declaration"><code>// my-component.js

export default {
  props: {
    foo: {
      type: String,
      value: 'bar'
    }
  }
}
      </code></pre>
      <p>
        The definition could avoid the data type, allowing any.  
      </p>
      <pre class="example" title="Component property declaration without type"><code>// my-component.js

export default {
  props: {
    foo: {
      value: 'bar'
    }
  }
}
      </code></pre>
      <p>
        Developers can also define the property's name without initializing it with a default value. This could be useful if the property is set up within the methods of the component. Properties could also be defined as a list of names.
      </p>
      <pre class="example" title="Declaration of component properties in an array"><code>// my-component.js

export default { 
  props: ['foo','button','title'],
}
      </code></pre>
      <pre class="example" title="Example of component defining a child component with properties"><code>// parent-component.html
&lt;my-comp button="Next" title="Item #1"&gt;
      </code></pre>
      
      <p>
        Internal <strong>methods and callback functions</strong> of a component are also defined in the object initializer of the primary scripting resource. A property key represents the method's name, and the value includes its definition.
      </p>
      <pre class="example" title="Declaration of a component callback function"><code>// my-component.js

export default {
  loadMore: function(event) {
    console.log(event);
  }
}     </code></pre>

      <section id="sec-methods">
        <h4>Built-in Methods</h4>
        <p data-cite="MINIAPP-LIFECYCLE">
          Although they are similar, MiniApp components do not implement the methods and attributes of the {{HTMLElement}} interface. The decoupling of [=Document/Logic layer=] and [=Document/View layer=] causes the logic of the component instance cannot directly access the DOM of the page. MiniApp user agents solve this challenge with specific interfaces that include built-in properties and methods exposed on the component public instance (i.e., accessible through `this`) for the following purposes:
        </p>
        <ul>
          <li>Access/add/modify a data property.</li>
          <li>Get the root component instance of the current component tree.</li>
          <li>Get the parent component instance.</li>
          <li>Get a child component instance based on its identifier.</li>
          <li>Support communication between relatives. Components trigger events that can be propagated to their parents, along with their associated data. The parent component gets the  child's instance, accessing its data and methods.</li>          
        </ul>
      </section>
      <div class="ednote">
        How to register a component? Just with the manifest?
      </div>
    </section>

  </section>

  <section id="sec-reuse">
    <h2>Component Reuse</h2>
    <p></p>
    <div class="ednote">
      How to instantiate a component. Passing arguments, attributes. Access to component nodes.
    </div>
  </section>

  <section id="sec-events">
    <h2>Component Events</h2>
    <section id="sec-events-binding">
      <h3>Event Binding</h3>
      <p></p>
      <div class="ednote">
      </div>
    </section>
    <section id="sec-events-listeners">
      <h3>Event Listeners</h3>
      <p></p>
      <div class="ednote">
        How
      </div>
    </section>
    <section id="sec-events-types">
      <h3>Types of Events</h3>
      <p></p>
      <div class="ednote">
        The common events for MiniApps.
      </div>
    </section>
  </section>

  <section id="sec-scripting">
    <h2>Scripting Resources</h2>
    <p></p>
    <div class="ednote">
      Restrictions in the scripting resources.
    </div>
  </section>

  <section id="sec-stylesheets">
    <h2>Stylesheets</h2>
    <p></p>
    <div class="ednote">
      CSS profile supported.
    </div>
  </section>

  <section id="sec-lifecycle">
    <h2>Component Lifecycle</h2>
    <p></p>
    <div class="ednote">
      Explanation and links to MINIAPP-LIFECYCLE.
    </div>
  </section>

  <section id="sec-elements">
    <h2>MiniApp Elements</h2>
    <p></p>
    <div class="ednote">
      Essential MiniApp elements. List, global attributes, events...
    </div>
  </section>  

  <section id="sec-accessibility" class="informative">
    <h2>Accessibility Considerations</h2>
    <p></p>
  </section>

  <section id="sec-security" data-cite="PERMISSIONS">
    <h2>Security Considerations</h2>
    <p></p>
  </section>

  <section id="sec-privacy">
    <h2>Privacy Considerations</h2>
    <p></p>
  </section>

  <section class="appendix" id="sec-acknowledgments">
    <h2>Acknowledgments</h2>
    <div class="ednote">List all the contributors and W3C Team contacts</div>
  </section>

</body>

</html>